# Sprites.dev vs EC2 比較調査結果

調査日: 2026-01-10
結論: **Sprites.devは除外**（コスト面で不採用）

---

## 概要

AR開発環境のインフラをEC2からSprites.devに置き換えた場合のメリット・デメリットを比較検討した。

---

## Sprites.devとは

- ハードウェア隔離されたLinuxサンドボックス環境
- AIエージェントや任意のコード実行向け
- 公式サイト: https://sprites.dev/

### 主な特徴

| 機能 | 詳細 |
|------|------|
| 起動速度 | 1秒以下（コールドスタート） |
| チェックポイント | 約300msで環境全体をスナップショット（CoW方式） |
| ファイルシステム | ext4、自動永続化 |
| HTTP公開 | 固有URL、ポート8080で公開可能 |
| ネットワーク制御 | DNSベースのL3ポリシー |
| 課金モデル | 使用リソースのみ（アイドル時は計算リソース課金停止） |

### 料金体系

| リソース | 単価 |
|----------|------|
| CPU | $0.07/CPU時間 |
| メモリ | $0.0438/GB時間 |
| ストレージ | $0.00068/GB時間 |

---

## 現在のEC2構成

```
Beam Pro
    └── Termius → コントロールEC2 (t4g.micro/常時起動)
                        └── tmux → 作業用EC2 × N (t4g.small/スポット)
```

### 月額コスト

| 項目 | スペック | 単価 | 月額 |
|------|----------|------|------|
| コントロールEC2 | t4g.micro 常時起動 | $0.0083/h | ~$6 |
| 作業用EC2 × 2 | t4g.small スポット (8h/日) | $0.0035/h | ~$2 |
| EBS | 20GB + 30GB × 2 | $0.096/GB/月 | ~$8 |
| **合計** | | | **~$15** |

---

## Sprites.devに置き換えた場合の試算

### 1環境あたり（1vCPU / 2GB RAM / 30GB Storage）

| 項目 | 計算 | 月額 |
|------|------|------|
| CPU | $0.07 × 240h (8h × 30日) | ~$17 |
| メモリ | $0.044 × 2GB × 240h | ~$21 |
| ストレージ | $0.00068 × 30GB × 720h | ~$15 |
| **1環境合計** | | **~$53** |

### 2環境の場合

| 構成 | 月額 |
|------|------|
| EC2 (現構成) | ~$15 |
| Sprites.dev | ~$106 |
| **差額** | **約7倍増** |

---

## 比較表

| 観点 | EC2 (現構成) | Sprites.dev |
|------|--------------|-------------|
| **月額コスト** | ~$15 | ~$106+ |
| **起動速度** | 1-2分 | <1秒 |
| **チェックポイント** | なし (AMI作成は数分) | 300msで可能 |
| **自動停止** | 自前実装済み (SSH切断後3時間) | ネイティブ対応 |
| **運用負荷** | やや高い (コントロールEC2管理) | 低い |
| **Cloudflare Tunnel** | 対応 | 固有URL (ポート8080のみ) |
| **code-server** | 対応 | 対応可能 |
| **Tailscale** | 対応 | 不要 (直接HTTP) |
| **AWS連携** | IAMロールで可能 | 不可 |
| **GPU** | 将来対応可 | 不明 |
| **成熟度** | 高い | 新サービス |

---

## Sprites.devのメリット

1. **起動速度**: 1秒以下で案件切り替えが瞬時
2. **チェックポイント**: 作業状態を300msで保存・復元可能
3. **運用簡素化**: コントロールEC2不要、自動停止設定不要
4. **構成シンプル化**: Tailscale/Cloudflare Tunnel不要

---

## Sprites.devのデメリット

1. **コスト**: 現構成の約7倍（$15 → $106/月）
2. **ネットワーク制御**: DNS/L3レベルのみ（Security Group相当の細かい制御不可）
3. **AWS連携**: IAMロールでの他サービス操作ができない
4. **成熟度**: 新サービスのため実績・安定性は未知数
5. **ストレージ課金**: 常時課金（EC2のEBSより高い）

---

## 結論

**Sprites.devは不採用**

### 理由

1. **コスト差が大きすぎる**: 月額$15 → $106（約7倍）
2. **現構成で十分最適化済み**: スポットインスタンス + 自動停止で低コスト運用を実現
3. **起動速度の差は許容範囲**: 1-2分の起動待ちは実用上問題なし
4. **AWS連携が必要**: CloudWatch、S3等との連携にIAMロールが必要

### 今後の検討条件

以下の場合は再検討の余地あり：
- Sprites.devの料金が大幅に下がった場合
- 起動速度が業務上クリティカルになった場合
- チェックポイント機能が必須になった場合
